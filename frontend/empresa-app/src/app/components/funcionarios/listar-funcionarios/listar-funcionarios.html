<!-- ✅ Cabeçalho da página com título e botões de ação -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <!-- Título principal -->
    <h1 class="h3 fw-bold text-dark mb-1">Funcionários</h1>
    <!-- Exibe o nome e sigla do departamento, caso existam -->
    <p *ngIf="departamento" class="text-muted">
      Departamento: <strong>{{ departamento.nome }} ({{ departamento.sigla }})</strong>
    </p>
  </div>
  <!-- Botões de navegação -->
  <div>
    <!-- Voltar para a lista de departamentos -->
    <button class="btn btn-secondary me-2" routerLink="/departamentos">
      <i class="bi bi-arrow-left me-2"></i>Voltar
    </button>
    <!-- Criar novo funcionário, passando o departamento atual via query string -->
    <button
      class="btn btn-primary btn-lg"
      routerLink="/funcionarios/novo"
      [queryParams]="{ departamentoId: departamentoId }"
    >
      <i class="bi bi-plus-circle me-2"></i>Novo Funcionário
    </button>
  </div>
</div>

<!-- ✅ Card principal que contém a tabela ou mensagem de vazio -->
<div class="card shadow-sm">
  <div class="card-body p-0">
    <!-- Caso não existam funcionários, exibe mensagem amigável -->
    <div *ngIf="funcionarios.length === 0" class="text-center py-5">
      <i class="bi bi-people text-muted" style="font-size: 3rem"></i>
      <p class="text-muted mt-3">Nenhum funcionário cadastrado neste departamento</p>

      <!-- Botão para adicionar o primeiro funcionário -->
      <button
        class="btn btn-primary"
        routerLink="/funcionarios/novo"
        [queryParams]="{ departamentoId: departamentoId }"
      >
        <i class="bi bi-plus-circle me-2"></i>Adicionar Primeiro Funcionário
      </button>
    </div>

    <!-- Caso existam funcionários, exibe tabela responsiva -->
    <div *ngIf="funcionarios.length > 0" class="table-responsive">
      <table class="table table-hover align-middle mb-0 rounded-top overflow-hidden">
        <!-- Cabeçalho da tabela -->
        <thead class="table-primary">
          <tr>
            <th class="border-0 ps-4">ID</th>
            <th class="border-0 text-center">Foto</th>
            <th class="border-0">Nome</th>
            <th class="border-0">RG</th>
            <th class="border-0 text-end pe-4">Ações</th>
          </tr>
        </thead>
        <!-- Corpo da tabela: percorre a lista de funcionários -->
        <tbody>
          <tr *ngFor="let funcionario of funcionarios">
            <!-- ID do funcionário -->
            <td class="fw-semibold ps-4">{{ funcionario.id }}</td>
            <!-- Foto do funcionário (ou ícone padrão caso não tenha imagem) -->
            <td class="text-center">
              <img
                *ngIf="funcionario.foto"
                [src]="funcionario.foto"
                alt="Foto"
                class="rounded"
                style="width: 50px; height: 50px; object-fit: cover"
              />
              <div *ngIf="!funcionario.foto" class="text-muted">
                <i class="bi bi-person-circle" style="font-size: 2rem"></i>
              </div>
            </td>
            <!-- Nome do funcionário -->
            <td>{{ funcionario.nome }}</td>

            <!-- RG do funcionário exibido com destaque -->
            <td>
              <span class="badge bg-secondary">{{ funcionario.rg }}</span>
            </td>

            <!-- Botões de ação: editar e excluir -->
            <td class="text-end pe-4">
              <!-- Editar funcionário -->
              <button
                class="btn btn-outline-warning btn-sm me-2"
                [routerLink]="['/funcionarios/editar', funcionario.id]"
              >
                <i class="bi bi-pencil me-1"></i>Editar
              </button>

              <!-- Excluir funcionário -->
              <button
                class="btn btn-outline-danger btn-sm"
                (click)="excluirFuncionario(funcionario.id)"
                [disabled]="!funcionario.id"
              >
                <i class="bi bi-trash me-1"></i>Excluir
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
